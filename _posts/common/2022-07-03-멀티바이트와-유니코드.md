---
layout: post
title: 멀티바이트와 유니코드
tags: [Test, Color]
author: mainmethod0126
excerpt_separator: <!--more-->
---

# 멀티바이트와 유니코드

개발을 하면서 문자열을 인코딩 한 방식과 다른 방식으로 디코딩을 하여 문자가 깨지는 현상이 발생합니다.
어떤 문자열 인코딩 방식이 있는지 왜 인코딩 된 방식과 다른 방식으로 디코딩하면 문자가 깨지는 지 확인해보겠습니다.


<!--more-->

## ASCII CODE
먼저 멀티바이트와 유니코드를 알아보기 전 ASCII CODE 에 대해서 잠깐 확인해보겠습니다.
컴퓨터 공학을 접해본 사람이라면 "ASCII" 라는 단어가 낯설지 않으실 겁니다.

ASCII CODE란 숫자만을 인식할 수 있는 컴퓨터에서 **문자를 표현하기 위해 정해진 숫자에 정해진 문자를 맵핑 시켜놓은 것** 입니다.

기본적인 **ASCII 코드**는 **0~127 까지 128(7bit)개**의 단어가 숫자와 맵핑되어있으며, 유럽어와 몇가지 특수문자가 포함된 **확장 ASCII 코드**는 **128개의 단어가 추가**적으로 맵핑되어 **총 256(8ibt = 1byte) 의 단어**를 표현할 수 있습니다.

문제는 이 단어라는 것들이 기본적으로 영어의 알파벳만을 고려하여 맵핑되어 있습니다.
지구상에는 많은 국가와 언어들이 존재하는데 알파벳만 사용해서 글로벌 서비스를 하기 위해서는 한계가 있습니다.

아무리 영어가 국제 표준처럼 사용된다 하더라도 영어를 사용하지 못하는 사람들이 굉장히 많기 때문이죠
이렇듯 글로벌 서비스를 하기 위해서는 알파벳이 아닌 언어로 표현을 해야하는데 ASCII 코드는 이게 불가능합니다.


## 멀티바이트
이 문제을 해결하기 위해 생겨난 것이 **멀티바이트** 입니다.

**멀티바이트** 라는 이름 부터가 **ASCII 코드가 1Byte 크기로 단 하나의 바이트**를 사용하는데, 멀티바이트 즉 **1개 이상의 Byte라는 이름**으로 **ASCII 코드의 단점을 극복하기 위해 나왔다** 라는 뉘앙스가 강해보입니다. 

단순히 1Byte만으로는 사용하고 싶은 단어를 다 표현할 수 없으니 그 이상의 숫자를 사용하는 것 입니다.
ASCII 가 영어 알파벳 사용을 위해 256개의 알파벳을 맵핑시켜 놓았다면, 한글이라는 문자를 사용하기 위해서 더 많은 단어를 1Byte 이상을 사용해서 숫자와 맵핑을 시켜놓는 것 입니다.

이런 방식으로, 한글을 위한 맵핑, 중국어를 위한 맵핑, 불어를 위한 맵핑, 기타 등등의 쓰임을 위한 맵핑등으로 사전에 맵핑 시켜 놓은 것을 **코드 페이지** 라고 합니다.

**ASCII** 또한 알파벳 사용을 위해 맵핑시켜놓을 것 으로 **코드 페이지** 라고 할 수 있습니다.

문제는 이미 많은 개발자들이 ASCII(1Byte)의 한계를 실감하고 있었고, 표준방식이 잡히기 전 불편함을 느끼고 있던 많은 곳에서 우후죽순 자신들만의 **멀티바이트 코드 페이지** 를 만들고 사용하기 시작합니다.

대부분 국가 단위로 사용되는 언어가 다르기에 국가 단위의 체계들이 생겨나기 시작하는데
이를 **국가 코드 페이지** 라고 합니다.

비유를 하자면 전세계적으로 **멀티바이트 코드 페이지 춘추전국시대**가 시작됩니다.

이 춘추전국시대가 발생하면서 또 다른 문제가 생겨납니다.

멀티바이트 말 그대로 1Byte 이상의 바이트를 사용하면 OK 이기 때문에, 같은 단어를 어디서는 1Byte로, 어디서는 2Byte로 어디서는 3Byte로 또 다른 어디서는 그 이상의 Byte로 제각각 표현하기 시작합니다.

이렇게 많은 **코드 페이지** 가 우후죽순 생겨나다 보니 ASCII가 아닌 **멀티바이트**를 사용했음에도, **'가'** 라는 단어가 어디서는 **'가' 로 정상적으로 출력**되는 한편, 또 다른 어디서는 **한자**로, 또는 **특수 문자**로, 또는 정말 **알 수 없는 단어**로 표현되는 현상이 발생하기 시작했습니다.

극단적으로 예를 들어봅시다, 여러분이 해외에 사는 친구에게 이번 방학에 놀러 오라고 이메일로 **"wellcome"** 이라는 단어를 적어서 보냈는데, 받는 친구는 여러분과는 다른 **코드 페이지** 를 사용하고 있어서 **"wellcome" 이라는 단어가 "go to hell" 로 보일 수 있다**는 것 입니다 (극단적 예시입니다.)


## 유니코드
위와 같은 문제들이 빈번하게 발생하기 시작하면서 많은 개발자들은 곤혹을 치루게 되고 **표준이 될 코드 페이지** 의 필요성을 절실하게 느끼게 됩니다. 

그 때 등장한 것이 **유니코드** 입니다. 

**유니코드** 란 **전세계의 모든 언어**를 **맵핑**시킨 **코드 페이지** 입니다.
**ASCII코드** 와 같은 **코드 페이지** 라는 말이죠

(실제 풀네임은 모르겠지만 **유니코드 = 유니버셜 코드 페이지** 라고 봐도 무방할 것 같습니다.)

이 **유니코드** 가 등장하면서 각 언어마다 자신의 언어를 쓰기위한 별도의 **코드 페이지** 를 만들 필요가 없어집니다.

드디어 수 많은 개발자들이 염원하던 **코드 페이지 춘추전국시대** 가 끝을 맞이하는 순간 입니다.

아, 물론 실제로 **유니코드** 가 등장했다고 **춘추전국시대** 가 100% 끝난 것은 아닙니다.
전세계적으로 영어가 표준화됬음에도 불과하고 영어가 통하지 않는 지역이 있듯이 이미 자신들의 코드 페이지를 이용해서 개발된 레거시 서비스들이 존재하기에 여전히 문제가 발생할 수 있습니다.

이 레거시 서비스들을 유지보수 하거나, 서비스간의 통신을 하게 될 경우가 충분히 존재하기에 우리는 **코드 페이지** 개념을 충분히 이해할 필요가 있습니다.

>뒤에 나올 내용이지만 흔히 들어본 **UTF-8, UTF-16** 이라는 말이 유니코드와 동일한 것 이다 라고 착각할 수 있는데 **엄연히 다른 의미 입니다**.
**UTF-8, UTF-16**은 **유니버셜 코드 페이지, 즉 유니코드 를 이용해서 어떻게 인코딩 할 것인가** 라는 **인코딩 방식**을 말하는 것 입니다. **8Bit로 인코딩**하면 **UTF-8** 이라 하고 **16Bit로 인코딩** 하면 **UTF-16** 이라 합니다. 자세한 것은 뒤에 설명드리겠습니다.


